dblock

데이터 일관성

데이터 무결성

lock의 종류

shared lock

exclusive lock

lock 단위

row level

page level

page

table level

database level

column level

블로킹

데드락

블로킹과 데드락 차이

dblock

- 데이터의 일관성을 보장하기 위한 방법
- 오라클과 같이 고가의 DBMS를 사용하는 이유는 데이터의 일관성과 무결성을 유지하기 위함이다

lock의 종류

shared lock

- 데이터를 읽을 때 사용한다
- 내가 보고 있는 데이터는 다른 사용자가 볼수 있지만 변경은 할 수 없다
- 다른세션에서 데이터를 읽는 것은 가능하다
- exclusive lock
- 데이터를 변경할 때 사용한다
- 락이 해제되기 전까지는 읽기와 쓰기가 불가하다
- 하나의 트랜잭션이 끝날때 까지 유지되고 exclusive lock 이 끝날때까지 어떠한 접근도 허용되지 않는다

blocking

- 락의 경합으로 인한 상태
- 락들이 경합이 발생하여 특정 세션이 작업을 진행하지 못하고 머춰 선 상태
- 공유락과 exclusive 락 또는 익스클루시브 락과 익스클루시브 락이 경합이 발생할 수 있다

블로킹 발생시 해결방안

- SQL 문 리펙토링 하여 빠르게 실행되도록 한다
- 트랜잭션을 짧게 정의한다
- 동일한 데이터를 동시에 변경하는 작업을 진행하지 않는다
- 대용략 작업이 불가피할 경우 작업단위를 쪼갠다
- 락 타임아웃을 설정하여 락의 최대시간을 설정한다

데드락

- 트랜잭션간 교착상태를 의미한다
- 두개의 트랜잭션이 각각의 트랜잭션이 갖고 있는 리소스의 락을 획득하려고 할때 발생한다