# JDBC ì‚¬ìš©í•˜ì—¬ h2ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°í…ŒìŠ¤íŠ¸
- h2 ë°ì´í„°ë² ì´ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì£¼ì…í•œë‹¤
- jdbcë¥¼ ì‚¬ìš©í•˜ì—¬ ì—°ê²°í•  ê²ƒì´ë¯€ë¡œ jdbc ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ì£¼ì…í•œë‹¤

```java
dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-jdbc'
  runtimeOnly 'com.h2database:h2'
  ...
}

```

- h2 ë“œë¼ì´ë²„ì— ì—°ê²°í•˜ê¸° ìœ„í•œ URL , USERNAME, PASSWORD ì •ë³´ë¥¼ ì„¤ì •í•œë‹¤
- ê°ì²´í™” ì‹œí‚¤ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ì¶”ìƒí´ë˜ìŠ¤ë¡œ ì„ ì–¸

```java
public abstract class ConnectionConst {
    public static final String URL = "jdbc:h2:tcp://localhost/~/test";
    public static final String USERNAME = "sa";
    public static final String PASSWORD = "";
}
```

- ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê¸° ìœ„í•œ DBConnectionUtil í´ë˜ìŠ¤ë¥¼ ìƒì„±
- h2 DriverManagerì™€ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•œë‹¤
- ì—°ê²°í•˜ê¸° ìœ„í•œ ë“œë¼ì´ë²„ ì ‘ì†ì •ë³´ , USERNAME, PASSWORDë¥¼ ì „ë‹¬í•œë‹¤
- ì—°ê²°ì¤‘ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ” ê²½ìš° IllegalSateException ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤

```java
public class DBConnectionUtil {

    public static Connection getConnection() {

        try {
            Connection connection = DriverManager.getConnection(URL, USERNAME,
                    PASSWORD);
            log.info("get connection={}, class={}", connection,
                    connection.getClass());
            return connection;
        } catch (SQLException e) {
            throw new IllegalStateException(e);
        }
    }
}
```

<aside>
ğŸ“Œ h2 ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ë¥¼ ì‹¤í–‰í•´ë‘” ìƒíƒœì—ì„œ ì—°ê²°ì„ ì§„í–‰í•´ì•¼ í•œë‹¤

</aside>

- ì—°ê²° í…ŒìŠ¤íŠ¸
- h2 ê°€ JdbcConnection ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ `import java.sql.Connection;` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í–ˆê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ h2 ì„œë²„ê°€ ì—°ê²°ì„ ë§ºì„ ìˆ˜ ìˆê²Œ ëœë‹¤

```java
@Test
void connection() {
    Connection connection = DBConnectionUtil.getConnection();
    assertThat(connection).isNotNull();
}
```

```java
23:15:11.140 [main] INFO hello.jdbc.connection.DBConnectionUtil - get connection=conn0: url=jdbc:h2:tcp://localhost/~/test user=SA, class=class org.h2.jdbc.JdbcConnection
```

- h2 ë°ì´í„°ë² ì´ìŠ¤ê°€ ê°–ê³  ìˆëŠ” JdbcConnection ê°ì²´ë¥¼ ê¹Œë³´ë©´ java.sql.Connection ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤

```java
public class JdbcConnection extends TraceObject implements Connection, JdbcConnectionBackwardsCompat,
        CastDataProvider {

  ...

}
```